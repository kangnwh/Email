{% extends "non_nav_base.html" %}
{% block link_ref %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for("static",filename="css/lightslider.min.css") }}">
{% endblock %}

{% block jsref %}
    {{ super() }}
    <script src="{{ url_for("static",filename="js/lightslider.min.js") }}"></script>

{% endblock %}

{% block page %}

    <div class="panel panel-default">
        <div class="panel-body">
            <div class="col-md-12 middle-line">{{ this_prod.prod_name }}<div class=" right-line"><kbd >Prod ID:{{ this_prod.prod_id }}</kbd></div></div>
            <div class="row">

                <div class="col-md-5 ">
                    <div class="row">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <ul id="image-gallery" class="gallery list-unstyled cS-hidden">
                                    <li data-thumb="{{ url_for("static",filename=("img/products/"+ this_prod.cover_img)) }}">
                                        <div class="indiv_pic_size "
                                             style="background-image: url('{{ (url_for("static",filename=("img/products/"+ this_prod.cover_img))) }}')">
                                            <img class="indiv-user-logo invisible" name='img-logo-original'
                                                 src="{{ url_for("static",filename=("img/user_logos/"+ current_user.logo_link)) }}"/>
                                            <img class="indiv-user-logo invisible" name='img-logo-processed'
                                                 src="{{ url_for("static",filename=("img/user_logos/GEN_"+ current_user.logo_link)) }}"/>
                                        </div>

                                    </li>
                                    {% for pic in this_prod.prod_pics %}
                                        <li data-thumb="{{ url_for("static",filename=("img/products/"+ pic.image_path)) }}">
                                            <div class="indiv_pic_size "
                                                 style="background-image: url('{{ (url_for("static",filename=("img/products/"+ pic.image_path))) }}')">
                                                <img class="indiv-user-logo invisible" name='img-logo-original'
                                                     src="{{ url_for("static",filename=("img/user_logos/"+ current_user.logo_link)) }}"/>
                                                <img class="indiv-user-logo invisible" name='img-logo-processed'
                                                     src="{{ url_for("static",filename=("img/user_logos/GEN_"+ current_user.logo_link)) }}"/>
                                            </div>

                                            <p>{{ pic.img_desc }}</p>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="alert alert-success">
                                <div class="row">
                                    <div class="col-md-4">
                                    <input id="switch-offColor" type="checkbox" data-off-color="warning"
                                           data-label-text="Logo">
                                    </div>

                                    <div class="col-md-4">
                                        <div class="panel panel-primary invisible " id="control-logo-processed"
                                             style="cursor: pointer;"
                                             onclick="switch_logo('control-logo-processed','control-logo-original')">
                                            <div class="panel-heading">Processed Logo</div>
                                            <div class="panel-body">
                                                <img class="list-user-logo"
                                                     src="{{ url_for("static",filename=("img/user_logos/GEN_"+ current_user.logo_link)) }}"/>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-4 ">
                                        <div class="panel panel-default invisible" id="control-logo-original"
                                             style="cursor: pointer;"
                                             onclick="switch_logo('control-logo-original','control-logo-processed')">
                                            <div class="panel-heading">Original Logo</div>
                                            <div class="panel-body ">
                                                <img class="list-user-logo"
                                                     src="{{ url_for("static",filename=("img/user_logos/"+ current_user.logo_link)) }}"/>
                                            </div>
                                        </div>
                                    </div>

                            </div></div>
                        </div>
                    </div>
                </div>


                <div class="col-md-7">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row well">
                                <div class="col-md-6 "><strong
                                        class="indiv-prod-desc-head">Description</strong><br/>{{ this_prod.prod_desc }}
                                </div>
                                <div class="col-md-6"><strong
                                        class="indiv-prod-desc-head">Colours</strong><br/>{{ this_prod.colors }}</div>
                            </div>
                            <div class="row well">
                                <div class="col-md-6"><strong class="indiv-prod-desc-head">Production
                                    Size</strong><br/>{{ this_prod.prod_size }}</div>
                                <div class="col-md-6"><strong class="indiv-prod-desc-head">Imprint
                                    Size</strong><br/>{{ this_prod.imprint_size }}</div>
                            </div>
                            <div class="row well">
                                <div class="col-md-6"><strong class="indiv-prod-desc-head">Lead
                                    Time</strong><br/>{{ this_prod.lead_time }}</div>
                                <div class="col-md-6"><strong class="indiv-prod-desc-head">Price
                                    Basis</strong><br/>{{ this_prod.price_basis }}</div>
                            </div>
                            <div class="row well">
                                <div class="col-md-3"><strong
                                        class="indiv-prod-desc-head">Subcategory</strong><br/>{{ this_prod.prod_sub_cat.prod_cat_sub_name }}
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script type="text/javascript">
        $(function () {

        });
        var lightslider = $('#image-gallery').lightSlider({
            gallery: true,
            item: 1,
            thumbItem: 9,
            slideMargin: 0,
            speed: 500,
            auto: true,
            loop: true, item: 1,
            onSliderLoad: function () {
                $('#image-gallery').removeClass('cS-hidden');
            }
        });
        function change_logo_choice(state) {
            var processed = $("#control-logo-processed");
            var original = $("#control-logo-original");
            if (state) {
                processed.removeClass('invisible');
                original.removeClass('invisible');
                if (processed.hasClass('panel-primary')) {
                    console.log('prcessed');
                    $("[name='img-logo-processed']").removeClass('invisible');
                    $("[name='img-logo-original']").addClass('invisible');
                } else {
                    console.log('original');
                    $("[name='img-logo-original']").removeClass('invisible');
                    $("[name='img-logo-processed']").addClass('invisible');
                }
            } else {
                $("[name='img-logo-processed']").addClass('invisible');
                $("[name='img-logo-original']").addClass('invisible');
                processed.addClass('invisible');
                original.addClass('invisible');
            }
        }
        function switch_logo(active, inactive) {
            $("#" + active).removeClass('panel-default');
            $("#" + active).addClass('panel-primary');

            $("#" + inactive).removeClass('panel-primary');
            $("#" + inactive).addClass('panel-default');

            change_logo_choice(true);
        }
        var el = $("#switch-offColor").bootstrapSwitch();
        el.bootstrapSwitch('state', false);
        el.on('switchChange.bootstrapSwitch', function (event, state) {
            change_logo_choice(state);
            {#            lightslider.goToNextSlide();#}
        });
    </script>
{% endblock %}